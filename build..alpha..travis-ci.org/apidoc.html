<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/nwhite89/GeoDistance"

    >geo-distance-js (v1.0.0)</a>
</h1>
<h4>A Node.js module which takes 2 Lat+Lng (Geolocation) points and returns the distance between the two points in Meters</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.geo-distance-js">module geo-distance-js</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.geo-distance-js.Gruntfile">
            function <span class="apidocSignatureSpan">geo-distance-js.</span>Gruntfile
            <span class="apidocSignatureSpan">(grunt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.geo-distance-js.distanceSort">
            function <span class="apidocSignatureSpan">geo-distance-js.</span>distanceSort
            <span class="apidocSignatureSpan">(toObj, orderBy)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.geo-distance-js.getDistance">
            function <span class="apidocSignatureSpan">geo-distance-js.</span>getDistance
            <span class="apidocSignatureSpan">(from, to, orderBy, length, decimals)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.geo-distance-js.retrieveDistance">
            function <span class="apidocSignatureSpan">geo-distance-js.</span>retrieveDistance
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">geo-distance-js.</span>distances</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.geo-distance-js.Gruntfile">module geo-distance-js.Gruntfile</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.geo-distance-js.Gruntfile.Gruntfile">
            function <span class="apidocSignatureSpan">geo-distance-js.</span>Gruntfile
            <span class="apidocSignatureSpan">(grunt)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.geo-distance-js.distanceSort">module geo-distance-js.distanceSort</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.geo-distance-js.distanceSort.distanceSort">
            function <span class="apidocSignatureSpan">geo-distance-js.</span>distanceSort
            <span class="apidocSignatureSpan">(toObj, orderBy)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.geo-distance-js.getDistance">module geo-distance-js.getDistance</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.geo-distance-js.getDistance.getDistance">
            function <span class="apidocSignatureSpan">geo-distance-js.</span>getDistance
            <span class="apidocSignatureSpan">(from, to, orderBy, length, decimals)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.geo-distance-js.retrieveDistance">module geo-distance-js.retrieveDistance</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.geo-distance-js.retrieveDistance.retrieveDistance">
            function <span class="apidocSignatureSpan">geo-distance-js.</span>retrieveDistance
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.geo-distance-js" id="apidoc.module.geo-distance-js">module geo-distance-js</a></h1>


    <h2>
        <a href="#apidoc.element.geo-distance-js.Gruntfile" id="apidoc.element.geo-distance-js.Gruntfile">
        function <span class="apidocSignatureSpan">geo-distance-js.</span>Gruntfile
        <span class="apidocSignatureSpan">(grunt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Gruntfile = function (grunt) {
    grunt.initConfig({
        &#x27;jshint&#x27;: {
            &#x27;src&#x27;: [
                &#x27;./*.js&#x27;
            ],
            &#x27;options&#x27;: {
                &#x27;jshintrc&#x27;: &#x27;.jshintrc&#x27;
            }
        },
        &#x27;jscs&#x27;: {
            &#x27;src&#x27;: &#x27;&#x3c;%= jshint.src %&#x3e;&#x27;
        },
        &#x27;mochaTest&#x27;: {
            &#x27;test&#x27;: {
                &#x27;src&#x27;: [
                    &#x27;tests/*.spec.js&#x27;
                ]
            }
        }
    });

    require(&#x27;load-grunt-tasks&#x27;)(grunt);

    // Registers a task to test the task
    grunt.registerTask(&#x27;test&#x27;, [
        &#x27;jshint&#x27;,
        &#x27;jscs&#x27;,
        &#x27;mochaTest&#x27;
    ]);

    grunt.registerTask(&#x27;default&#x27;, [&#x27;test&#x27;]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.geo-distance-js.distanceSort" id="apidoc.element.geo-distance-js.distanceSort">
        function <span class="apidocSignatureSpan">geo-distance-js.</span>distanceSort
        <span class="apidocSignatureSpan">(toObj, orderBy)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">distanceSort = function (toObj, orderBy) {
    toObj.sort(function (a, b) {
        var a1 = a.distance, b1 = b.distance;
        if (a1 == b1) { return 0; }
        return a1&#x3e; b1 ? 1 : -1;
    });

    if (orderBy != &#x27;asc&#x27;) {
        toObj.reverse();
    }

    return toObj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

        data.toLat = toLat.toRad();

        toObj[i].distance = this.retrieveDistance(data);
    }

    if (orderBy) {
        toObj = this.<span class="apidocCodeKeywordSpan">distanceSort</span>(toObj, orderBy);
    }

    return toObj;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.geo-distance-js.getDistance" id="apidoc.element.geo-distance-js.getDistance">
        function <span class="apidocSignatureSpan">geo-distance-js.</span>getDistance
        <span class="apidocSignatureSpan">(from, to, orderBy, length, decimals)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDistance = function (from, to, orderBy, length, decimals) {
    decimals = decimals || 2;
    length = length || &#x27;km&#x27;;

    var fromObj = from,
        toObj = to.slice(0),
        earthRadius = this.distances[length],
        fromLng = parseFloat(fromObj.lng),
        fromLat = parseFloat(fromObj.lat);

    fromLat = fromLat.toRad();

    for (var i = to.length - 1; i &#x3e;= 0; i--) {
        var lngLat = toObj[i],
            toLat = parseFloat(lngLat.lat),
            toLng = parseFloat(lngLat.lng),
            dLat = (fromLat - toLat).toRad(),
            dLng = (fromLng - toLng).toRad(),
            data = {
                earthRadius: earthRadius,
                decimals: decimals,
                dLat: dLat,
                dLng: dLng,
                toLng: toLng,
                fromLat: fromLat
            };

        data.toLat = toLat.toRad();

        toObj[i].distance = this.retrieveDistance(data);
    }

    if (orderBy) {
        toObj = this.distanceSort(toObj, orderBy);
    }

    return toObj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Add the module as a variable in your .js file

``var dist = require(&#x27;geo-distance-js&#x27;);``

Run the function with

``dist.<span class="apidocCodeKeywordSpan">getDistance</span>(toLat, toLng, fromLat, fromLng);``
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.geo-distance-js.retrieveDistance" id="apidoc.element.geo-distance-js.retrieveDistance">
        function <span class="apidocSignatureSpan">geo-distance-js.</span>retrieveDistance
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveDistance = function (data) {
    var earthRadius = data.earthRadius,
        decimals = data.decimals,
        dLat = data.dLat,
        dLng = data.dLng,
        toLat = data.toLat,
        toLng = data.toLng,
        fromLat = data.fromLat,

        a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
            Math.sin(dLng / 2) * Math.sin(dLng / 2) * Math.cos(toLat) *
            Math.cos(fromLat),
        b = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)),
        c = earthRadius * b,
        d = (Math.round(c * Math.pow (10, decimals)) /
            Math.pow(10, decimals)) * 1000;

    return d;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            dLng: dLng,
            toLng: toLng,
            fromLat: fromLat
        };

    data.toLat = toLat.toRad();

    toObj[i].distance = this.<span class="apidocCodeKeywordSpan">retrieveDistance</span>(data);
}

if (orderBy) {
    toObj = this.distanceSort(toObj, orderBy);
}

return toObj;
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.geo-distance-js.Gruntfile" id="apidoc.module.geo-distance-js.Gruntfile">module geo-distance-js.Gruntfile</a></h1>


    <h2>
        <a href="#apidoc.element.geo-distance-js.Gruntfile.Gruntfile" id="apidoc.element.geo-distance-js.Gruntfile.Gruntfile">
        function <span class="apidocSignatureSpan">geo-distance-js.</span>Gruntfile
        <span class="apidocSignatureSpan">(grunt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Gruntfile = function (grunt) {
    grunt.initConfig({
        &#x27;jshint&#x27;: {
            &#x27;src&#x27;: [
                &#x27;./*.js&#x27;
            ],
            &#x27;options&#x27;: {
                &#x27;jshintrc&#x27;: &#x27;.jshintrc&#x27;
            }
        },
        &#x27;jscs&#x27;: {
            &#x27;src&#x27;: &#x27;&#x3c;%= jshint.src %&#x3e;&#x27;
        },
        &#x27;mochaTest&#x27;: {
            &#x27;test&#x27;: {
                &#x27;src&#x27;: [
                    &#x27;tests/*.spec.js&#x27;
                ]
            }
        }
    });

    require(&#x27;load-grunt-tasks&#x27;)(grunt);

    // Registers a task to test the task
    grunt.registerTask(&#x27;test&#x27;, [
        &#x27;jshint&#x27;,
        &#x27;jscs&#x27;,
        &#x27;mochaTest&#x27;
    ]);

    grunt.registerTask(&#x27;default&#x27;, [&#x27;test&#x27;]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.geo-distance-js.distanceSort" id="apidoc.module.geo-distance-js.distanceSort">module geo-distance-js.distanceSort</a></h1>


    <h2>
        <a href="#apidoc.element.geo-distance-js.distanceSort.distanceSort" id="apidoc.element.geo-distance-js.distanceSort.distanceSort">
        function <span class="apidocSignatureSpan">geo-distance-js.</span>distanceSort
        <span class="apidocSignatureSpan">(toObj, orderBy)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">distanceSort = function (toObj, orderBy) {
    toObj.sort(function (a, b) {
        var a1 = a.distance, b1 = b.distance;
        if (a1 == b1) { return 0; }
        return a1&#x3e; b1 ? 1 : -1;
    });

    if (orderBy != &#x27;asc&#x27;) {
        toObj.reverse();
    }

    return toObj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

        data.toLat = toLat.toRad();

        toObj[i].distance = this.retrieveDistance(data);
    }

    if (orderBy) {
        toObj = this.<span class="apidocCodeKeywordSpan">distanceSort</span>(toObj, orderBy);
    }

    return toObj;
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.geo-distance-js.getDistance" id="apidoc.module.geo-distance-js.getDistance">module geo-distance-js.getDistance</a></h1>


    <h2>
        <a href="#apidoc.element.geo-distance-js.getDistance.getDistance" id="apidoc.element.geo-distance-js.getDistance.getDistance">
        function <span class="apidocSignatureSpan">geo-distance-js.</span>getDistance
        <span class="apidocSignatureSpan">(from, to, orderBy, length, decimals)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDistance = function (from, to, orderBy, length, decimals) {
    decimals = decimals || 2;
    length = length || &#x27;km&#x27;;

    var fromObj = from,
        toObj = to.slice(0),
        earthRadius = this.distances[length],
        fromLng = parseFloat(fromObj.lng),
        fromLat = parseFloat(fromObj.lat);

    fromLat = fromLat.toRad();

    for (var i = to.length - 1; i &#x3e;= 0; i--) {
        var lngLat = toObj[i],
            toLat = parseFloat(lngLat.lat),
            toLng = parseFloat(lngLat.lng),
            dLat = (fromLat - toLat).toRad(),
            dLng = (fromLng - toLng).toRad(),
            data = {
                earthRadius: earthRadius,
                decimals: decimals,
                dLat: dLat,
                dLng: dLng,
                toLng: toLng,
                fromLat: fromLat
            };

        data.toLat = toLat.toRad();

        toObj[i].distance = this.retrieveDistance(data);
    }

    if (orderBy) {
        toObj = this.distanceSort(toObj, orderBy);
    }

    return toObj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Add the module as a variable in your .js file

``var dist = require(&#x27;geo-distance-js&#x27;);``

Run the function with

``dist.<span class="apidocCodeKeywordSpan">getDistance</span>(toLat, toLng, fromLat, fromLng);``
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.geo-distance-js.retrieveDistance" id="apidoc.module.geo-distance-js.retrieveDistance">module geo-distance-js.retrieveDistance</a></h1>


    <h2>
        <a href="#apidoc.element.geo-distance-js.retrieveDistance.retrieveDistance" id="apidoc.element.geo-distance-js.retrieveDistance.retrieveDistance">
        function <span class="apidocSignatureSpan">geo-distance-js.</span>retrieveDistance
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveDistance = function (data) {
    var earthRadius = data.earthRadius,
        decimals = data.decimals,
        dLat = data.dLat,
        dLng = data.dLng,
        toLat = data.toLat,
        toLng = data.toLng,
        fromLat = data.fromLat,

        a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
            Math.sin(dLng / 2) * Math.sin(dLng / 2) * Math.cos(toLat) *
            Math.cos(fromLat),
        b = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)),
        c = earthRadius * b,
        d = (Math.round(c * Math.pow (10, decimals)) /
            Math.pow(10, decimals)) * 1000;

    return d;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            dLng: dLng,
            toLng: toLng,
            fromLat: fromLat
        };

    data.toLat = toLat.toRad();

    toObj[i].distance = this.<span class="apidocCodeKeywordSpan">retrieveDistance</span>(data);
}

if (orderBy) {
    toObj = this.distanceSort(toObj, orderBy);
}

return toObj;
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
